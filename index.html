<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>ä¿®å¿ƒå…»æ€§è®°</title>
<style>
body {
  background: #f8f4ef;
  font-family: "å®‹ä½“";
  display: flex;
  flex-direction: row;
  justify-content: center;
  align-items: flex-start;
  height: 100vh;
  padding: 20px;
}
#tipBox {
  width: 40%;
  background: #fff8f2;
  border: 2px solid #cbb8a5;
  border-radius: 10px;
  padding: 15px;
  color: #5c4631;
  line-height: 1.8;
  font-size: 16px;
  box-shadow: 0 0 6px #e0d1be;
  height: 88.5vh;
  overflow-y: auto;
}

#loginSection {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-top: 15px;
  border: none; /* å»æ‰æ¨¡å—æ„Ÿ */
  background:#f9e6ea;
  background-color: #f9e6ea;   /* æŸ”ç²‰åº•è‰² */
  border: 1px solid #e4b6c2;  /* ç²‰è‰²è¾¹æ¡† */
  color: #704848;   
}
#main {
  width: 50%;
  margin-left: 30px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}
button {
  background: #f9e6ea;
  border: none;
  padding: 2px 7px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 14px;
}
button:hover {
  background: #d7c1a8;
}
.section {
  background: #fffdf8;
  border: 1px solid #d2c0a8;
  border-radius: 3px;
  padding: 15px;
}
#scoreBoard {
  font-weight: bold;
  color: #4b3823;
  margin-bottom: 5px;
}
#attrBoard {
  background: #fefaf5;
  border: 1px solid #d6c4aa;
  border-radius: 10px;
  padding: 10px;
  margin-bottom: 8px;
  font-size: 15px;
  color: #5c4631;
}
.attr-line {
  display: flex;
  justify-content: space-between;
  padding: 2px 0;
}
/* è°ƒæ•´h3æ ‡ç­¾ */
h3 {
  font-size: 18px; /* ç¼©å°å­—ä½“å¤§å° */
  margin: 0px 0 7px; /* å¢åŠ ä¸Šæ–¹å’Œä¸‹æ–¹çš„é—´è· */
  padding-left: 10px; /* ä½¿æ ‡é¢˜é å·¦ */
}
    </style>
</head>
<body>

<div id="tipBox">
  <div id="loginSection">
    <button onclick="registerWithEmail()">æ³¨å†Œ</button>
    <button onclick="loginWithEmail()">ç™»å½•</button>
    <button onclick="saveGameData()">ä¿å­˜è¿›åº¦</button> 
  </div>
</div>


<div id="main">
  <div id="scoreBoard">å½“å‰ç­‰çº§ï¼šå©‰å¥³ã€€æ€»ç§¯åˆ†ï¼š0</div>
  <div id="attrBoard">
    <div class="attr-line"><span>ğŸŒ¿ å¥åº·ï¼š</span><span id="healthVal">10</span></div>
    <div class="attr-line"><span>ğŸ”¥ ä½“åŠ›ï¼š</span><span id="staminaVal">10</span></div>
    <div class="attr-line"><span>ğŸ§º æ•´æ´ï¼š</span><span id="tidinessVal">10</span></div>
    <div class="attr-line"><span>ğŸª æ„å¿—ï¼š</span><span id="willVal">10</span></div>
    <div class="attr-line"><span>ğŸ•Šï¸ å¿ƒæ€§ï¼š</span><span id="mindVal">10</span></div>
    <div class="attr-line"><span>ğŸ“œ æ‚Ÿæ€§ï¼š</span><span id="wisdomVal">10</span></div>
  </div>

  <div class="section">
    <h3>ğŸ“– å­¦ä¹ </h3>
    <select id="subject">
      <option>ä¸­åŒ»å­¦</option>
      <option>é’ˆç¸å­¦</option>
      <option>è¥¿åŒ»å­¦</option>
      <option>è‹±æ–‡</option>
    </select>
    <input id="studyHour" type="number" placeholder="å°æ—¶" min="0" style="width:50px;">æ—¶
    <input id="studyMin" type="number" placeholder="åˆ†é’Ÿ" min="0" style="width:60px;">åˆ†
    <button onclick="study()">ä¿®ä¹ </button>
    <button onclick="noStudy()">å·æ‡’ä¸€æ—¥</button>
  </div>

  <div class="section">
    <h3>ğŸ¥£ é¥®é£Ÿ</h3>
    <button onclick="eat('å¥åº·')">è†³é£Ÿæ¸…æ·¡</button>
    <button onclick="eat('åƒåœ¾')">æ²¹ç‚¸å¥¶èŒ¶æ³¡é¢</button>
  </div>

  <div class="section">
    <h3>ğŸ’ª è¿åŠ¨</h3>
    <button onclick="exercise('æŒé‡é”»ä½“')">æŒé‡é”»ä½“ï¼ˆä¸¾å“‘é“ƒï¼‰</button>
    <button onclick="exercise('ä¿®èº«å…»æ€§')">ä¿®èº«å…»æ€§ï¼ˆè…°éƒ¨é”»ç‚¼ï¼‰</button>
    <button onclick="exercise('èˆ’ç­‹æ´»ç»œ')">èˆ’ç­‹æ´»ç»œï¼ˆæ‹‰ä¼¸ï¼‰</button>
    <button onclick="exercise('èˆåŠ¨é£å')">èˆåŠ¨é£åï¼ˆå¥èº«æ“ï¼‰</button>
  </div>

  <div class="section">
    <h3>ğŸ¡ æ—¥å¸¸</h3>
    <button onclick="cook()">çƒ¹é¥ªè†³é£Ÿ</button>
    <button onclick="clean()">æ‰“æ‰«æˆ¿é—´</button>
  </div>

  <div class="section">
    <h3>ğŸª ä»ªå®¹</h3>
    <button onclick="groom('åŒ–å¦†')">æ–½ç²‰é»›</button>
    <button onclick="groom('åˆ·ç‰™')">æ™¨èµ·ç›¥æ´—</button>
    <button onclick="groom('æ´—æ¾¡')">æ²æµ´æ›´è¡£</button>
  </div>

  <div class="section">
    <h3>ğŸ•‰ï¸ å¿µç»</h3>
    <button onclick="chant()">å¿µç»ä¿®è¡Œ</button>
    <button onclick="noChant()">æ€ æ…¢ä¿®è¡Œ</button>
Â Â   </div>

<script type="module">
Â  Â  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
Â  Â  import {Â 
Â  Â  Â  Â  Â  Â  getAuth,Â 
Â  Â  Â  Â  Â  Â  createUserWithEmailAndPassword,Â 
Â  Â  Â  Â  Â  Â  signInWithEmailAndPassword,
Â  Â  Â  Â  Â  Â  onAuthStateChanged
Â  Â  Â  Â  } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
Â  Â  import {Â 
Â  Â  Â  Â  Â  Â  getFirestore,Â 
Â  Â  Â  Â  Â  Â  doc,Â 
Â  Â  Â  Â  Â  Â  setDoc,Â 
Â  Â  Â  Â  Â  Â  getDocÂ 
Â  Â  Â  Â  } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

Â  Â  // æ‚¨åŸæœ‰çš„ Firebase é…ç½®
Â  Â  const firebaseConfig = {
Â  Â  Â  apiKey: "AIzaSyAaLeQq_L5JUSQpZ_0jQlHeWm3pXnoxd5g",
Â  Â  Â  authDomain: "mylifeproject-4712e.firebaseapp.com",
Â  Â  Â  projectId: "mylifeproject-4712e",
Â  Â  Â  storageBucket: "mylifeproject-4712e.firebasestorage.app",
Â  Â  Â  messagingSenderId: "326417385505",
Â  Â  Â  appId: "1:326417385505:web:f352dacda0da35fb17bb60"
Â  Â  };

Â  Â  const app = initializeApp(firebaseConfig);
Â  Â  const auth = getAuth();
Â  Â  const db = getFirestore(app);

Â  Â  let currentUser = null;
    
    // è¾…åŠ©å‡½æ•°ï¼šä»æ˜¾ç¤ºåŒºè·å–æ‰€æœ‰æç¤ºä¿¡æ¯
    function getTipsFromDisplay() {
        const tipBox = document.getElementById('tipBox');
        return Array.from(tipBox.children).map(child => child.innerText);
    }
    
    // è¾…åŠ©å‡½æ•°ï¼šæ¸…ç©ºå¹¶æ˜¾ç¤ºä» Firestore è¯»å–çš„æç¤ºä¿¡æ¯
    function displayTips(tipsArray) {
        const tipBox = document.getElementById('tipBox');
        tipBox.innerHTML = ''; 
        
        // Tips æ˜¯æŒ‰æ—§åˆ°æ–°ä¿å­˜çš„ï¼Œä½† tipBox æ˜¯æ–°åˆ°æ—§ï¼ˆprependï¼‰ï¼Œæ‰€ä»¥åè½¬æ•°ç»„åé€ä¸ª prepend
        [...tipsArray].reverse().forEach(tipText => {
            const p = document.createElement('div');
            p.innerText = tipText;
            tipBox.prepend(p);
        });
        
        // æ·»åŠ ä¸€ä¸ªå‹å¥½çš„åˆ†éš”ç¬¦
        const greeting = document.createElement('div');
        greeting.innerText = `--- [${new Date().toLocaleString('zh-CN')}] å­˜æ¡£åŠ è½½å®Œæˆ ---`;
        tipBox.prepend(greeting);
    }

Â  Â  // ç›‘å¬è®¤è¯çŠ¶æ€ï¼Œå®ç°ç™»å½•æˆ–åˆ·æ–°åè‡ªåŠ¨è¯»å–
Â  Â  onAuthStateChanged(auth, (user) => {
Â  Â  Â  Â  if (user) {
Â  Â  Â  Â  Â  Â  currentUser = user;
Â  Â  Â  Â  Â  Â  console.log("ç”¨æˆ·å·²ç™»å½•ï¼ŒID:", currentUser.uid);
            // ç™»å½•æˆ–åˆ·æ–°åè‡ªåŠ¨åŠ è½½æ•°æ®å’ŒTips
Â  Â  Â  Â  Â  Â  loadGameData(true); // ä¼ å…¥ true è¡¨ç¤ºæ˜¯è‡ªåŠ¨åŠ è½½ï¼Œä¸å¼¹çª—
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  currentUser = null;
Â  Â  Â  Â  Â  Â  console.log("ç”¨æˆ·æœªç™»å½•æˆ–å·²ç™»å‡º");
Â  Â  Â  Â  }
Â  Â  });

Â  Â  // ä½¿ç”¨é‚®ç®±æ³¨å†Œ
Â  Â  function registerWithEmail() {
Â  Â  Â  const email = prompt("è¯·è¾“å…¥æ‚¨çš„é‚®ç®±");
Â  Â  Â  const password = prompt("è¯·è¾“å…¥æ‚¨çš„å¯†ç ï¼ˆè‡³å°‘6ä½ï¼‰");

Â  Â  Â  Â  if (!email || !password) {
Â  Â  Â  Â  Â  Â  alert("é‚®ç®±å’Œå¯†ç ä¸èƒ½ä¸ºç©ºï¼");
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  createUserWithEmailAndPassword(auth, email, password)
Â  Â  Â  Â  .then((userCredential) => {
Â  Â  Â  Â  Â  currentUser = userCredential.user;
Â  Â  Â  Â  Â  console.log("æ³¨å†ŒæˆåŠŸï¼Œç”¨æˆ·ID:", currentUser.uid);
Â  Â  Â  Â  Â  alert("æ³¨å†ŒæˆåŠŸï¼Œå·²ä¸ºæ‚¨ä¿å­˜åˆå§‹è¿›åº¦ï¼");
Â  Â  Â  Â  Â  Â  saveGameData(true); // æ³¨å†ŒæˆåŠŸåè‡ªåŠ¨ä¿å­˜ä¸€æ¬¡åˆå§‹æ•°æ®
Â  Â  Â  Â  })
Â  Â  Â  Â  .catch((error) => {
Â  Â  Â  Â  Â  console.error("æ³¨å†Œå¤±è´¥", error);
Â  Â  Â  Â  Â  alert(`æ³¨å†Œå¤±è´¥: ${error.message}`);
Â  Â  Â  Â  });
Â  Â  }

Â  Â  // ä½¿ç”¨é‚®ç®±ç™»å½•
Â  Â  function loginWithEmail() {
Â  Â  Â  const email = prompt("è¯·è¾“å…¥æ‚¨çš„é‚®ç®±");
Â  Â  Â  const password = prompt("è¯·è¾“å…¥æ‚¨çš„å¯†ç ");

Â  Â  Â  Â  if (!email || !password) {
Â  Â  Â  Â  Â  Â  alert("é‚®ç®±å’Œå¯†ç ä¸èƒ½ä¸ºç©ºï¼");
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  signInWithEmailAndPassword(auth, email, password)
Â  Â  Â  Â  .then((userCredential) => {
Â  Â  Â  Â  Â  currentUser = userCredential.user;
Â  Â  Â  Â  Â  console.log("ç™»å½•æˆåŠŸï¼Œç”¨æˆ·ID:", currentUser.uid);
Â  Â  Â  Â  Â  loadGameData(true); // ç™»å½•æˆåŠŸåè‡ªåŠ¨è¯»å–æ•°æ®ï¼Œä¸å¼¹çª—
Â  Â  Â  Â  Â  alert("ç™»å½•æˆåŠŸï¼Œå­˜æ¡£å·²è‡ªåŠ¨åŠ è½½ï¼");
Â  Â  Â  Â  })
Â  Â  Â  Â  .catch((error) => {
Â  Â  Â  Â  Â  console.error("ç™»å½•å¤±è´¥", error);
Â  Â  Â  Â  Â  alert(`ç™»å½•å¤±è´¥: ${error.message}`);
Â  Â  Â  Â  });
Â  Â  }

Â  Â  // ä¿å­˜æ¸¸æˆæ•°æ®å’Œ Tips åˆ° Firestore
Â  Â  async function saveGameData(isInitialSave = false) {
Â  Â  Â  Â  if (!currentUser) {
Â  Â  Â  Â  Â  Â  alert("è¯·å…ˆç™»å½•æˆ–æ³¨å†Œæ‰èƒ½ä¿å­˜æ•°æ®ï¼");
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  Â  const userDocRef = doc(db, "users", currentUser.uid);Â 
        const currentTips = getTipsFromDisplay(); // è·å–æ‰€æœ‰å½“å‰æ˜¾ç¤ºçš„ Tips

Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  await setDoc(userDocRef, {
Â  Â  Â  Â  Â  Â  Â  Â  attributes: window.attr,Â 
                tips: currentTips, // <-- ä¿å­˜ Tips æ•°ç»„
Â  Â  Â  Â  Â  Â  Â  Â  lastSave: new Date().toLocaleString('zh-CN'), 
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  if (!isInitialSave) {
Â  Â  Â  Â  Â  Â  Â  Â  alert("æ¸¸æˆæ•°æ®å’Œå†å²è®°å½•ä¿å­˜æˆåŠŸï¼");
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  console.log("æ•°æ®æˆåŠŸå†™å…¥ Firestoreï¼");
Â  Â  Â  Â  } catch (e) {
Â  Â  Â  Â  Â  Â  console.error("æ•°æ®å†™å…¥å¤±è´¥ï¼š", e);
Â  Â  Â  Â  Â  Â  alert("æ•°æ®ä¿å­˜å¤±è´¥ï¼Œè¯·æ£€æŸ¥ Firebase æƒé™å’Œç½‘ç»œè¿æ¥ã€‚");
Â  Â  Â  Â  }
Â  Â  }
Â  Â Â 
Â  Â  // ä» Firestore è¯»å–æ¸¸æˆæ•°æ®å’Œ Tips
Â  Â  async function loadGameData(isAutoLoad = false) {
Â  Â  Â  Â  if (!currentUser) {
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  Â  const userDocRef = doc(db, "users", currentUser.uid);Â 
Â  Â  Â  Â Â 
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const docSnap = await getDoc(userDocRef);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (docSnap.exists()) {
Â  Â  Â  Â  Â  Â  Â  Â  const data = docSnap.data();
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // 1. è¯»å– Attributes
Â  Â  Â  Â  Â  Â  Â  Â  if(data.attributes) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Object.assign(window.attr, data.attributes);Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.updateDisplay(); // æ›´æ–°æ˜¾ç¤º
Â  Â  Â  Â  Â  Â  Â  Â  }

                // 2. è¯»å– Tips
                if (data.tips && Array.isArray(data.tips)) {
                    displayTips(data.tips); // æ¸…ç©ºå¹¶æ˜¾ç¤ºæ‰€æœ‰å†å² Tips
                } else {
                    document.getElementById('tipBox').innerHTML = '';
                    window.addTip(`æ¬¢è¿å›æ¥ï¼Œ${currentUser.email}ï¼æœªæ‰¾åˆ°å†å²è®°å½•ï¼Œè¯·ç»§ç»­ä¿®è¡Œã€‚`);
                }

Â  Â  Â  Â  Â  Â  Â  Â  console.log("æ•°æ®è¯»å–æˆåŠŸ:", data);

Â  Â  Â  Â  Â  Â  } else if (!isAutoLoad) {
Â  Â  Â  Â  Â  Â  Â  Â  // ä»…åœ¨éè‡ªåŠ¨åŠ è½½ï¼ˆå³æ‰‹åŠ¨ç‚¹å‡»ï¼Œè™½ç„¶æˆ‘ä»¬ç°åœ¨ç§»é™¤äº†æŒ‰é’®ï¼‰æ—¶æç¤º
Â  Â  Â  Â  Â  Â  Â  Â  alert("æœªæ‰¾åˆ°æ‚¨çš„æ¸¸æˆå­˜æ¡£ï¼Œè¯·è¿›è¡Œæ¸¸æˆæ“ä½œåç‚¹å‡»ã€ä¿å­˜è¿›åº¦ã€‘ï¼");
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  } catch (e) {
Â  Â  Â  Â  Â  Â  console.error("æ•°æ®è¯»å–å¤±è´¥ï¼š", e);
Â  Â  Â  Â  Â  Â  if (!isAutoLoad) {
                alert("æ•°æ®è¯»å–å¤±è´¥ï¼Œè¯·æ£€æŸ¥ Firebase æƒé™å’Œç½‘ç»œè¿æ¥ã€‚");
            }
Â  Â  Â  Â  }
Â  Â  }
Â  Â Â 
Â  Â  // *** å°†æ¨¡å—å†…çš„å‡½æ•°æš´éœ²ç»™å…¨å±€ä½œç”¨åŸŸ ***
Â  Â  window.registerWithEmail = registerWithEmail;
Â  Â  window.loginWithEmail = loginWithEmail;
Â  Â  window.saveGameData = saveGameData;Â 
Â  Â  // loadGameData å·²è¢«ç§»é™¤

Â  </script>
 
<!-- æ¸¸æˆé€»è¾‘è„šæœ¬ -->
<script>
// è·å–å½“å‰æ—¥æœŸ
function getCurrentDate() {
  const now = new Date();
  const year = now.getFullYear();
  const month = now.getMonth() + 1; // æœˆä»½ä»0å¼€å§‹ï¼Œéœ€è¦åŠ 1
  const day = now.getDate();
  return `${year}å¹´${month}æœˆ${day}æ—¥`; // è¿”å›æ—¥æœŸæ ¼å¼
}

let attr = {
  health: 0,
  stamina: 0,
  tidiness: 0,
  will: 0,
  mind: 0,
  wisdom: 0
};

function totalScore(){
  return attr.health + attr.stamina + attr.tidiness + attr.will + attr.mind + attr.wisdom;
}

function levelName(){
  const t = totalScore();
  if(t>=150) return "å¤§æˆ";
  if(t>=100) return "ä½³äºº";
  if(t>=60) return "çŸ¥å¥³";
  if(t>=30) return "æ‰å¥³";
  return "å©‰å¥³";
}

function updateDisplay(){
  document.getElementById('scoreBoard').innerText = 
    `å½“å‰ç­‰çº§ï¼š${levelName()}ã€€æ€»ç§¯åˆ†ï¼š${Math.round(totalScore())}`;
  document.getElementById('healthVal').innerText = attr.health.toFixed(1);
  document.getElementById('staminaVal').innerText = attr.stamina.toFixed(1);
  document.getElementById('tidinessVal').innerText = attr.tidiness.toFixed(1);
  document.getElementById('willVal').innerText = attr.will.toFixed(1);
  document.getElementById('mindVal').innerText = attr.mind.toFixed(1);
  document.getElementById('wisdomVal').innerText = attr.wisdom.toFixed(1);
}

function addTip(text){
  const tipBox = document.getElementById('tipBox');
  const p = document.createElement('div');
  const date = getCurrentDate(); // è·å–å½“å‰æ—¥æœŸ
  p.innerText = `[${date}] ${text}`; // åœ¨æç¤ºä¿¡æ¯å‰åŠ ä¸Šæ—¥æœŸ
  tipBox.prepend(p);
}

// åˆå§‹æç¤º
addTip("ğŸŒ¸ æ¸…æ™¨å¾®å…‰ï¼Œé™å€™ä¿®è¡Œå§‹ã€‚");

// ğŸ“– å­¦ä¹ 
function study(){
  const subject = document.getElementById('subject').value;
  let hour = parseFloat(document.getElementById('studyHour').value) || 0;
  let min = parseFloat(document.getElementById('studyMin').value) || 0;
  let totalHour = hour + min/60;
  if(totalHour <= 0){ addTip("æ— å¿ƒäºä¹¦å·ï¼Œæ—¶å…‰æ‚„ç„¶æºœèµ°â€¦â€¦"); return; }

  let gain = totalHour * 3;
  attr.wisdom += gain;
  attr.will += gain * 0.5;

  // éšæœºé€‰æ‹©å¤é£æç¤º
  const studyTips = [
    `ç¯ä¸‹æŒ‘ç¯ç ”è¯»ã€Š${subject}ã€‹ï¼Œç¬”å¢¨ç”Ÿé¦™ï¼Œæ‚Ÿæ€§ï¼‹${gain.toFixed(1)}ï¼Œæ„å¿—ï¼‹${(gain*0.5).toFixed(1)}ã€‚`,
    `è½»å¯ä¹¦å·ï¼Œæ˜¥é£æ‹‚é¢ï¼Œç ”ä¹ ã€Š${subject}ã€‹æœ‰æˆï¼Œæ‚Ÿæ€§ï¼‹${gain.toFixed(1)}ï¼Œæ„å¿—ï¼‹${(gain*0.5).toFixed(1)}ã€‚`,
    `å¤œæ·±ç¯ç«ï¼Œå€©å½±ç ”è¯»ï¼Œã€Š${subject}ã€‹å¦‚è¯—å¦‚ç”»ï¼Œæ‚Ÿæ€§ï¼‹${gain.toFixed(1)}ï¼Œæ„å¿—ï¼‹${(gain*0.5).toFixed(1)}ã€‚`,
    `çª—å¤–æœˆå…‰å¦‚æ°´ï¼Œæ¡Œä¸Šä¹¦é¦™æ‰‘é¼»ï¼Œã€Š${subject}ã€‹ä¸­çš„å¥¥ç§˜æ¸æ¸æ˜äº†ï¼Œæ‚Ÿæ€§ï¼‹${gain.toFixed(1)}ï¼Œæ„å¿—ï¼‹${(gain*0.5).toFixed(1)}ã€‚`
  ];
  addTip(studyTips[Math.floor(Math.random() * studyTips.length)]);
  updateDisplay();
}

function noStudy(){
  attr.will -= 1;
  attr.wisdom -= 1;
  addTip("ä¸€æ—¥å·æ‡’ï¼Œä¹¦å·è’™å°˜ï¼Œæ‚Ÿæ€§ï¼1ï¼Œæ„å¿—ï¼1ã€‚");
  updateDisplay();
}

// ğŸ¥£ é¥®é£Ÿ
function eat(type){
  if(type === 'å¥åº·'){
    attr.health += 1;
    addTip("é’è”¬æ·¡é¥­ï¼Œæ¸…å¿ƒå¯¡æ¬²ï¼Œæ°”è¡€è°ƒå’Œï¼Œå¥åº·ï¼‹1ã€‚");
  } else {
    attr.health -= 2;
    addTip("æ²¹ç‚¸å¥¶èŒ¶æ³¡é¢å…¥è…¹ï¼Œè„¾èƒƒä¸é€‚ï¼Œå¥åº·ï¼2ã€‚");
  }
  updateDisplay();
}

// ğŸ’ª è¿åŠ¨
function exercise(type){
  let tip;
  if(type === "æŒé‡é”»ä½“"){
    attr.stamina += 1.5;
    attr.health += 1;
    tip = [
      "ä¸¾é“å¦‚å±±ï¼Œæ°”è¡€ç•…é€šï¼Œä½“åŠ›ï¼‹1.5ï¼Œå¥åº·ï¼‹1ã€‚",
      "æ²‰å¿ƒé”¤ç‚¼ï¼Œç­‹éª¨èˆ’å±•ï¼Œä½“åŠ›ï¼‹1.5ï¼Œå¥åº·ï¼‹1ã€‚",
      "åŠ›è¡Œé”»ä½“ï¼Œæ°”è¡€æµç•…ï¼Œä½“åŠ›ï¼‹1.5ï¼Œå¥åº·ï¼‹1ã€‚"
    ];
  }

  if(type === "ä¿®èº«å…»æ€§"){
    attr.stamina += 1;
    attr.will += 0.5;
    tip = [
      "è½»èˆ’è…°è‚¢ï¼Œæ°”å®šç¥é—²ï¼Œä½“åŠ›ï¼‹1ï¼Œæ„å¿—ï¼‹0.5ã€‚",
      "è…°èº«è½»æ—‹ï¼Œå¿ƒé™å¦‚æ°´ï¼Œä½“åŠ›ï¼‹1ï¼Œæ„å¿—ï¼‹0.5ã€‚",
      "é™å¿ƒå…»æ€§ï¼Œèˆ’å±•èº«å¿ƒï¼Œä½“åŠ›ï¼‹1ï¼Œæ„å¿—ï¼‹0.5ã€‚"
    ];
  }

  if(type === "èˆ’ç­‹æ´»ç»œ"){
    attr.health += 1;
    attr.mind += 0.5;
    tip = [
      "ç­‹éª¨èˆ’å±•ï¼Œå¿ƒå¢ƒæ¸…å®ï¼Œå¥åº·ï¼‹1ï¼Œå¿ƒæ€§ï¼‹0.5ã€‚",
      "è½»è½»èˆ’å±•ï¼Œèº«å¿ƒæ„‰æ‚¦ï¼Œå¥åº·ï¼‹1ï¼Œå¿ƒæ€§ï¼‹0.5ã€‚",
      "ç­‹éª¨ç•…é€šï¼Œæ°”è¡€æµåŠ¨ï¼Œå¥åº·ï¼‹1ï¼Œå¿ƒæ€§ï¼‹0.5ã€‚"
    ];
  }

  if(type === "èˆåŠ¨é£å"){
    attr.stamina += 1.2;
    attr.health += 0.7;
    tip = [
      "èˆåŠ¨é£åï¼Œæ°”è¡€æµç•…ï¼Œèº«å¿ƒåˆä¸€ï¼Œä½“åŠ›ï¼‹1.2ï¼Œå¥åº·ï¼‹0.7ã€‚",
      "èˆæ­¥è½»ç›ˆï¼Œç¥é‡‡å¥•å¥•ï¼Œä½“åŠ›ï¼‹1.2ï¼Œå¥åº·ï¼‹0.7ã€‚",
      "èˆå§¿ç¿©è·¹ï¼Œæ°”è¡€é¡ºç•…ï¼Œä½“åŠ›ï¼‹1.2ï¼Œå¥åº·ï¼‹0.7ã€‚"
    ];
  }
  addTip(tip[Math.floor(Math.random() * tip.length)]);
  updateDisplay();
}

// ğŸ¡ æ—¥å¸¸
function cook(){
  attr.health += 1;
  attr.will += 0.5;
  addTip("äº²æ‰‹çƒ¹è°ƒï¼Œé¦™æ°”å››æº¢ï¼Œé£Ÿå…»èº«å¿ƒï¼Œå¥åº·ï¼‹1ï¼Œæ„å¿—ï¼‹0.5ã€‚");
  updateDisplay();
}

function clean(){
  attr.tidiness += 1;
  attr.stamina += 0.5;
  addTip("æ‰«å»å°˜åŸƒï¼Œæ˜çª—å‡€å‡ ï¼Œå¿ƒå¢ƒæ¾„æ˜ï¼Œæ•´æ´ï¼‹1ï¼Œä½“åŠ›ï¼‹0.5ã€‚");
  updateDisplay();
}

// ğŸª ä»ªå®¹
function groom(type){
  let tip;
  if(type==="åŒ–å¦†"){attr.will += 1; tip = "è½»æ–½ç²‰é»›ï¼Œæ˜çœ¸å–„çï¼Œç¥é‡‡å¥•å¥•ï¼Œæ„å¿—ï¼‹1ã€‚";}
  if(type==="åˆ·ç‰™"){attr.health += 0.5; tip = "æ¸…æ™¨ç›¥æ´—ï¼Œé½¿ç™½å¦‚ç‰ï¼Œç²¾ç¥ç„•å‘ï¼Œå¥åº·ï¼‹0.5ã€‚";}
  if(type==="æ´—æ¾¡"){attr.health += 1; tip = "æ¸©æ³‰è½»é›¾ï¼Œæ´—å»ç–²ä¹ï¼Œèº«å¿ƒä¿±å‡€ï¼Œå¥åº·ï¼‹1ã€‚";}
  addTip(tip);
  updateDisplay();
}

// ğŸ•‰ï¸ å¿µç»
function chant(){
  attr.mind += 0.5;
  attr.will += 0.5;
  addTip("é™å¿ƒè¯µç»ï¼Œå¿ƒçµæ¾„å‡€ï¼Œå¿ƒæ€§ï¼‹0.5ï¼Œå®šåŠ›ï¼‹0.5ã€‚");
  updateDisplay();
}

function noChant(){
  attr.will -= 1;
  attr.mind -= 1;
  addTip("å¿ƒæµ®æ°”èºï¼Œå¿µç»ä¸ä¸“ï¼Œå¿ƒæ€§ï¼1ï¼Œå®šåŠ›ï¼1ã€‚");
  updateDisplay();
}

updateDisplay();
</script>

</body>
</html>
